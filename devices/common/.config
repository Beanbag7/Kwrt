# ==============================
# 通用系统配置
# ==============================

# 启动设置
CONFIG_GRUB_TIMEOUT="0"
CONFIG_GRUB_CONSOLE=n

# 目标配置
CONFIG_TARGET_MULTI_PROFILE=y
CONFIG_TARGET_ALL_PROFILES=y

# 文件系统设置
CONFIG_TARGET_ROOTFS_EXT4FS=n
CONFIG_TARGET_ROOTFS_CPIOGZ=n
CONFIG_TARGET_ROOTFS_PARTSIZE=1004

# 构建系统配置
CONFIG_ALL_NONSHARED=y
CONFIG_USE_APK=n
CONFIG_BUILD_PATENTED=y
CONFIG_IB=y
CONFIG_IB_STANDALONE=y
CONFIG_JSON_OVERVIEW_IMAGE_INFO=y
CONFIG_IMAGEOPT=y
CONFIG_VERSIONOPT=y
CONFIG_VERSION_FILENAMES=n
CONFIG_VERSION_CODE_FILENAMES=n
CONFIG_VERSION_MANUFACTURER="Kiddin'"
CONFIG_VERSION_HOME_URL="https://openwrt.ai/"

# 开发工具
CONFIG_DEVEL=y
CONFIG_CCACHE=y
CONFIG_TOOLCHAINOPTS=y

# 内核配置
CONFIG_KERNEL_WERROR=n
CONFIG_KERNEL_XDP_SOCKETS=y

# ==============================
# 网络协议支持
# ==============================

# IPv6支持
CONFIG_IPV6=y

# ==============================
# 核心软件包
# ==============================

# 包签名验证
CONFIG_SIGNED_PACKAGES=n
CONFIG_SIGNATURE_CHECK=n

# DNS和DHCP
CONFIG_PACKAGE_dnsmasq=n
CONFIG_PACKAGE_dnsmasq-full=y
CONFIG_PACKAGE_dnsmasq_full_dhcp=y
CONFIG_PACKAGE_dnsmasq_full_ipset=y

# 防火墙和UPnP
CONFIG_PACKAGE_firewall4=y
CONFIG_PACKAGE_miniupnpd-iptables=y

# Web服务器
CONFIG_NGINX_DAV=y

# ==============================
# 基础系统组件
# ==============================

# 自动核心配置
CONFIG_PACKAGE_autocore=y

# 基础文件系统
CONFIG_PACKAGE_base-files=y

# Shell环境
CONFIG_PACKAGE_bash=y

# 系统工具
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_nano=y
CONFIG_PACKAGE_wget-ssl=y
CONFIG_PACKAGE_curl=y

# 系统设置
CONFIG_PACKAGE_my-default-settings=y
CONFIG_PACKAGE_zoneinfo-asia=y
CONFIG_PACKAGE_ca-bundle=y

# 压缩支持
CONFIG_PACKAGE_kmod-lib-lz4=y
CONFIG_PACKAGE_kmod-lib-zstd=y

# 内存优化
CONFIG_PACKAGE_zram-swap=y

# WiFi脚本
CONFIG_PACKAGE_wifi-scripts=m

# ==============================
# Web界面配置
# ==============================

# Luci基础组件
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-lib-ipkg=y
CONFIG_PACKAGE_luci-ssl=y

# 主题
CONFIG_PACKAGE_luci-theme-bootstrap=y

# 语言支持
CONFIG_LUCI_LANG_zh_Hans=y
CONFIG_LUCI_LANG_en=y

# Luci应用程序 - 核心管理
CONFIG_PACKAGE_luci-app-filemanager=y
CONFIG_PACKAGE_luci-app-firewall=y
CONFIG_PACKAGE_luci-app-upnp=y

# ==============================
# 性能测试和优化
# ==============================

# CoreMark基准测试
CONFIG_PACKAGE_coremark=y
CONFIG_COREMARK_OPTIMIZE_O3=y
CONFIG_COREMARK_ENABLE_MULTITHREADING=y
CONFIG_COREMARK_NUMBER_OF_THREADS=16

# 压缩优化
CONFIG_ZLIB_OPTIMIZE_SPEED=y
CONFIG_ZSTD_OPTIMIZE_O3=y

# ==============================
# 代理工具配置
# ==============================

# Xray/V2Ray
CONFIG_XRAY_PROVIDE_V2RAY=y
CONFIG_V2RAY_CORE_COMPRESS_UPX=n
CONFIG_XRAY_CORE_COMPRESS_UPX=n

# ==============================
# 编程语言支持
# ==============================

# Node.js (谨慎启用，可能增加编译复杂度)
CONFIG_NODEJS_14=y

# ==============================
# BusyBox自定义配置
# ==============================

CONFIG_BUSYBOX_CUSTOM=y
CONFIG_BUSYBOX_CONFIG_FEATURE_XARGS_SUPPORT_REPL_STR=y
CONFIG_BUSYBOX_CONFIG_FEATURE_CROND_SPECIAL_TIMES=y
CONFIG_BUSYBOX_CONFIG_FEATURE_SYSLOG_INFO=y

# ==============================
# Docker支持配置
# ==============================

# Cgroup支持
CONFIG_KERNEL_CGROUP_DEVICE=y
CONFIG_KERNEL_CGROUP_FREEZER=y
CONFIG_KERNEL_NET_CLS_CGROUP=y
CONFIG_KERNEL_CGROUP_NET_PRIO=y
CONFIG_KERNEL_MEMCG_SWAP_ENABLED=y
CONFIG_KERNEL_CFQ_GROUP_IOSCHED=y
CONFIG_KERNEL_CGROUP_PERF=y
CONFIG_KERNEL_CGROUP_HUGETLB=y

# 文件系统ACL支持
CONFIG_KERNEL_EXT4_FS_POSIX_ACL=y
CONFIG_KERNEL_EXT4_FS_SECURITY=y
CONFIG_KERNEL_BTRFS_FS_POSIX_ACL=y

# ==============================
# 禁用组件
# ==============================

# 禁用电话相关功能
CONFIG_FEED_telephony=n

# 禁用CSS优化
CONFIG_LUCI_CSSTIDY=n

# 禁用特定内核模块
CONFIG_PACKAGE_kmod-pcie_mhi=n
CONFIG_PACKAGE_kmod-rtl8189es=n

# 可选：网络监控（已注释）
# CONFIG_PACKAGE_netdata=m

# ==============================
# 编译优化
# ==============================

# 禁用Rust相关包以减少编译复杂度
CONFIG_PACKAGE_rust=y
CONFIG_PACKAGE_rustc=y
CONFIG_PACKAGE_cargo=y

# 减少并行编译任务以避免内存不足
# CONFIG_BUILD_SUFFIX="lowmem"
